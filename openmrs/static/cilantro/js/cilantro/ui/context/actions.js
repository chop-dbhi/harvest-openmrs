define(["underscore","marionette","../core"],function(e,t,i){var n=t.ItemView.extend({template:"context/actions",ui:{removeAll:"[data-action=remove]",count:"[data-target=count]",units:"[data-target=units]",loading:"[data-target=loading-message]",refresh:"[data-action=refresh]"},events:{"click @ui.removeAll":"clickRemoveAll","click @ui.refresh":"refreshCount"},modelEvents:{request:"showLoad",sync:"enableRefreshButton"},collectionEvents:{"add remove reset":"renderRemoveAll"},initialize:function(){this.model.stats.on("sync",this.showCount,this)},serializeData:function(){var t=e.clone(this.model.attributes);return t.count=this.model.stats.get("count"),t.prettyCount=i.utils.prettyNumber(t.count,i.config.get("threshold")),t},clickRemoveAll:function(){this.collection.unapply()},onRender:function(){this.renderRemoveAll()},showLoad:function(){i.config.get("distinctCountAutoRefresh")&&(this.ui.count.hide(),this.ui.units.hide(),this.ui.loading.show())},showCount:function(){this.ui.count.show(),this.ui.units.show(),this.ui.loading.hide(),this.render()},enableRefreshButton:function(){i.config.get("distinctCountAutoRefresh")||(this.$el.addClass("muted"),this.ui.refresh.show())},renderRemoveAll:function(){var e=this.collection.reject(function(e){return e.get("required")===!0});this.ui.removeAll.prop("disabled",!e.length)},refreshCount:function(){this.model.stats.manualFetch(),this.$el.removeClass("muted"),this.ui.refresh.hide(),this.ui.count.hide(),this.ui.units.hide(),this.ui.loading.show()}});return{ContextActions:n}});
//# sourceMappingURL=actions.js.map