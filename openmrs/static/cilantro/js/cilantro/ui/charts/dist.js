define(["jquery","underscore","../base","./core","./utils"],function(t,e,i,n,r){var s=i.LoadView.extend({message:"Chart loading..."}),a=n.Chart.extend({template:"charts/chart",loadView:s,ui:{chart:".chart",heading:".heading",status:".heading .status"},initialize:function(){e.bindAll(this,"chartClick","setValue")},showLoadView:function(){var t=new this.loadView;t.render(),this.ui.chart.html(t.el)},chartClick:function(t){t.point.select(!t.point.selected,!0),this.change()},interactive:function(t){var e;return t.chart&&(e=t.chart.type),"pie"===e||"column"===e&&t.xAxis.categories?!0:!1},getChartOptions:function(e){var i=r.processResponse(e,[this.model]);return i.clustered?this.ui.status.text("Clustered").show():this.ui.status.hide(),this.interactive(i)&&this.setOptions("plotOptions.series.events.click",this.chartClick),t.extend(!0,i,this.chartOptions),i.chart.renderTo=this.ui.chart[0],i},getField:function(){return this.model.id},getValue:function(){return e.pluck(this.chart.getSelectedPoints(),"category")},getOperator:function(){return"in"},removeChart:function(){n.Chart.prototype.removeChart.apply(this,arguments),this.node&&this.node.destroy()},onRender:function(){this.options.parentView&&this.ui.chart.width(this.options.parentView.$el.width()),this.showLoadView();var t=this;this.model.distribution(function(i){if(!t.isClosed){var n=e.map(i,function(t){return{count:t.count,values:[{label:t.label,value:null===t.value?"":t.value}]}});n=e.sortBy(n,function(t){return t.values[0]});var r=t.getChartOptions({clustered:!1,data:n,outliers:null,size:n.length});n.length?t.renderChart(r):t.showEmptyView(r)}})},setValue:function(t){if(e.isArray(t)||(t=[]),null!==this.chart)for(var i,n,r=this.chart.series[0].points,s=0;s<r.length;s++)i=r[s],n=!1,(null!==i.name||-1!==t.indexOf(i.category))&&(n=!0),i.select(n,!0)}});return{FieldChart:a}});
//# sourceMappingURL=dist.js.map